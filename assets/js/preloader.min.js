$.fn.preloader=function(l){var d={delay:200,preload_parent:"a",check_timer:300,ondone:function(){},oneachload:function(i){},fadein:500};var l=$.extend(d,l),j=$(this),g=j.find("img").css({visibility:"hidden",opacity:0}),c,a=0,e=0,b=[],f=l.delay,k=function(){c=setInterval(function(){if(a>=b.length){clearInterval(c);l.ondone();return}for(e=0;e<g.length;e++){if(g[e].complete==true){if(b[e]==false){b[e]=true;l.oneachload(g[e]);a++;f=f+l.delay}$(g[e]).css("visibility","visible").delay(f).animate({opacity:1},l.fadein,function(){$(this).parent().removeClass("preloader")})}}},l.check_timer)};g.each(function(){if($(this).parent(l.preload_parent).length==0){$(this).wrap("<a class='preloader' />")}else{$(this).parent().addClass("preloader")}b[e++]=false});g=$.makeArray(g);var h=jQuery("<img />",{id:"loadingicon"}).hide().appendTo("body");c=setInterval(function(){if(h[0].complete==true){clearInterval(c);k();h.remove();return}},100)};